import{j as e,c as v,u as g,a as x,r as V,b as y,i as F,d as w,f as S,L as I,e as L}from"./index-A6-ow6Ss.js";const j=({children:s,styles:t,type:a="button",onClick:c})=>e.jsx("button",{type:a,className:t,onClick:c,children:s}),A="/campers/assets/sprite-br_Fn0aP.svg",u=({name:s,width:t,height:a,className:c=""})=>e.jsx("svg",{className:c,width:t,height:a,children:e.jsx("use",{xlinkHref:`${A}#${s}`})}),D=()=>e.jsxs("div",{className:"error_message",children:[e.jsx(u,{className:"error_message__icon",name:"error",width:"40",height:"40"}),e.jsx("p",{className:"error_message__text",children:"Something go wrong"})]}),M=()=>e.jsxs("div",{className:"not_found_message",children:[e.jsx(u,{className:"not_found_message__icon",name:"not_found",width:"32",height:"32"}),e.jsx("p",{className:"not_found_message__text",children:"Not found"})]}),r={adults:{text:"adults",svg:"users",showValue:!0},automatic:{text:"Automatic",svg:"automatic",showValue:!1},airConditioner:{text:"Air conditioner",svg:"air-conditioner",showValue:!0},bathroom:{text:"Bathroom",svg:"shower",showValue:!1},kitchen:{text:"kitchen",svg:"kitchen",showValue:!1},beds:{text:"beds",svg:"bed",showValue:!0},TV:{text:"TV",svg:"tv",showValue:!1},CD:{text:"CD",svg:"cd",showValue:!1},radio:{text:"Radio",svg:"radio",showValue:!1},shower:{text:"Shower",svg:"shower",showValue:!1},toilet:{text:"Toilet",svg:"toilet",showValue:!1},freezer:{text:"Freezer",svg:"freezer",showValue:!1},hob:{text:"hob",svg:"hob",showValue:!0},microwave:{text:"Microwave",svg:"microwave",showValue:!1},gas:{text:"Gas",svg:"gas",showValue:!1},water:{text:"Water",svg:"water",showValue:!1},ac:{text:"AC",svg:"wind",showValue:!1},petrol:{text:"Petrol",svg:"petrol",showValue:!1}},T={adults:r.adults,automatic:r.automatic,petrol:r.petrol,kitchen:r.kitchen,beds:r.beds,ac:r.ac},E={adults:r.adults,automatic:r.automatic,airConditioner:r.airConditioner,bathroom:r.bathroom,kitchen:r.kitchen,beds:r.beds,TV:r.TV,CD:r.CD,radio:r.radio,shower:r.shower,toilet:r.toilet,freezer:r.freezer,hob:r.hob,microwave:r.microwave,gas:r.gas,water:r.water,ac:r.ac,petrol:r.petrol},p=({text:s,svg:t,showValue:a,value:c})=>e.jsxs("div",{className:"camper_item_details_item",children:[e.jsx(u,{name:t,width:"20",height:"20"}),a&&c," ",s]}),P=({camper:s,fullList:t})=>{const a=t?E:T,{details:c,adults:m}=s,{adults:h,automatic:i,ac:o,petrol:l}=a;return e.jsxs("div",{className:"camper_item_details",children:[e.jsx(p,{text:h.text,svg:h.svg,showValue:h.showValue,value:m}),e.jsx(p,{text:i.text,svg:i.svg,showValue:i.showValue,value:0}),c.airConditioner>0&&e.jsx(p,{text:o.text,svg:o.svg,showValue:o.showValue,value:0}),e.jsx(p,{text:l.text,svg:l.svg,showValue:l.showValue,value:0}),Object.entries(c).map(([d,n])=>{const f=a[d];return f?e.jsx(p,{text:f.text,svg:f.svg,showValue:f.showValue,value:n},d):null})]})},R=({isActive:s,onClick:t})=>e.jsx(j,{styles:"favorite_button",onClick:t,children:e.jsx(u,{name:"heart",className:`favorite_button__heart ${s?"active":""}`,width:"24",height:"24"})}),b=4,z=s=>s.camper.items,B=s=>s.camper.isLoading,$=s=>s.camper.error,K=s=>s.camper.filters,G=s=>s.camper.favoriteItems,C=s=>s.camper.page,O=s=>v([G],t=>t.some(a=>a._id===s)),k=v([z,K],(s,{location:t,automatic:a,form:c,kitchen:m,shower:h,tv:i,ac:o})=>s.filter(({location:l,transmission:d,form:n,details:_})=>!(t&&!l.toLowerCase().includes(t.toLowerCase())||a&&d!=="automatic"||c&&n!==c||m&&!_.kitchen||h&&(!_.shower||!_.toilet)||i&&!_.TV||o&&!_.airConditioner))),W=v([k,C],(s,t)=>s.slice(0,t*b)),q=v([k,C],(s,t)=>s.length>t*b),H=({camper:s})=>{const t=g(),{_id:a,name:c,price:m,location:h,rating:i,description:o,gallery:l,reviews:d}=s,n=x(O(a)),_=()=>{t(n?V(a):y(s))};return e.jsxs("li",{className:"camper_item",children:[e.jsx("img",{className:"camper_item__img",src:l[0],alt:c}),e.jsxs("div",{className:"camper_item__body",children:[e.jsxs("div",{className:"camper_item__body_header",children:[e.jsxs("div",{className:"camper_item__body_header_main",children:[e.jsx("p",{className:"camper_item__body_header_main_text",children:c}),e.jsxs("div",{className:"camper_item__body_header_main_group",children:[e.jsxs("p",{children:["â‚¬",m]}),e.jsx(R,{isActive:n,onClick:_})]})]}),e.jsxs("div",{className:"camper_item__body_header_additional",children:[e.jsxs("div",{className:"camper_item__body_header_additional_container",children:[e.jsx(u,{name:"star",width:"16",height:"16"}),e.jsxs("p",{className:"camper_item__body_header_additional_review_text",children:[i,"(",d.length," Reviews)"]})]}),e.jsxs("p",{className:"camper_item__body_header_additional_container",children:[e.jsx(u,{name:"map-pin",width:"16",height:"16"}),h]})]})]}),e.jsx("p",{className:"camper_item__body_text",children:o}),e.jsx(P,{camper:s,fullList:!1}),e.jsx(j,{styles:"btn_main",children:"Show more"})]})]})},J=()=>{const s=g(),t=x(q),a=()=>{s(F())};return e.jsx("div",{className:"load_more_btn_container",children:t&&e.jsx(j,{styles:"btn_secondary",onClick:a,children:"Load more"})})},Q=()=>{const s=g(),t=x(W),a=x(B),c=x($);return w.useEffect(()=>{s(S())},[s]),e.jsxs("div",{className:"camper_list",children:[a&&e.jsx(I,{}),c?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"camper_list__items",children:t.length>0?t.map(m=>e.jsx(H,{camper:m},m._id)):e.jsx(M,{})}),e.jsx(J,{})]})]})},U=[{id:"ac",name:"ac",text:"AC",svg:"wind",checked:!1},{id:"automatic",name:"automatic",text:"Automatic",svg:"automatic",checked:!1},{id:"kitchen",name:"kitchen",text:"Kitchen",svg:"kitchen",checked:!1},{id:"tv",name:"tv",text:"TV",svg:"tv",checked:!1},{id:"shower",name:"shower",text:"Shower/WC",svg:"shower",checked:!1}],X=[{id:"panelTruck",name:"form",text:"Van",svg:"van",checked:!1},{id:"fullyIntegrated",name:"form",text:"Fully Integrated",svg:"fully_integrated",checked:!1},{id:"alcove",name:"form",text:"Alcove",svg:"alcove",checked:!1}],N=({item:s,type:t})=>{const{id:a,name:c,svg:m,checked:h,text:i}=s;return e.jsxs("li",{className:`camper_search_form_filters_item ${h?"active":""}`,id:a,children:[e.jsx("input",{className:"camper_search_form_filters_item__input",type:t,name:c,checked:h,readOnly:!0,id:a,value:t==="radio"?a:""}),e.jsxs("label",{className:"camper_search_form_filters_item__label",htmlFor:a,children:[e.jsx(u,{name:m,height:"32",width:"32"}),e.jsx("p",{className:"camper_search_form_filters_item__label_text",children:i})]})]})},Y=()=>{const[s,t]=w.useState(U),[a,c]=w.useState(X),m=i=>{var l;const o=(l=i.target.closest("li"))==null?void 0:l.id;o&&t(d=>d.map(n=>n.id===o?{...n,checked:!n.checked}:n))},h=i=>{var l;const o=(l=i.target.closest("li"))==null?void 0:l.id;o&&c(d=>d.map(n=>({...n,checked:n.id===o&&!n.checked})))};return e.jsxs("div",{className:"camper_search_form_filters",children:[e.jsx("p",{className:"camper_search_form_filters__title",children:"Filters"}),e.jsxs("div",{className:"camper_search_form_filters__container",children:[e.jsx("h2",{className:"camper_search_form_filters__container_title",children:"Vehicle equipment"}),e.jsx("hr",{className:"camper_search_form_filters__container_line"}),e.jsx("ul",{className:"camper_search_form_filters__container_list",onClick:m,children:s.map(i=>e.jsx(N,{item:i,type:"checkbox"},i.id))})]}),e.jsxs("div",{className:"camper_search_form_filters__container",children:[e.jsx("h2",{className:"camper_search_form_filters__container_title",children:"Vehicle type"}),e.jsx("hr",{className:"camper_search_form_filters__container_line"}),e.jsx("ul",{className:"camper_search_form_filters__container_list",onClick:h,children:a.map(i=>e.jsx(N,{item:i,type:"radio"},i.id))})]})]})},Z=()=>e.jsxs("div",{className:"camper_search_input_group",children:[e.jsx("label",{className:"camper_search_input_group__label",htmlFor:"location",children:"Location"}),e.jsxs("div",{className:"camper_search_input_group__container",children:[e.jsx("input",{className:"camper_search_input_group__input",type:"text",name:"location",placeholder:"City"}),e.jsx(u,{className:"camper_search_input_group__icon",name:"map-pin",width:"16",height:"16"})]})]}),ee=()=>{const s=g(),t=a=>{a.preventDefault();const{location:c,ac:m,automatic:h,kitchen:i,tv:o,shower:l,form:d}=a.currentTarget.elements;s(L({location:c.value,ac:m.checked,automatic:h.checked,kitchen:i.checked,tv:o.checked,shower:l.checked,form:d.value}))};return e.jsxs("form",{className:"camper_search_form",onSubmit:t,children:[e.jsx(Z,{}),e.jsx(Y,{}),e.jsx(j,{type:"submit",styles:"btn_main",children:"Search"})]})},te=()=>e.jsxs("div",{className:"catalog",children:[e.jsx(ee,{}),e.jsx(Q,{})]});export{te as default};
